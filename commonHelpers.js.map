{"version":3,"file":"commonHelpers.js","sources":["../src/js/modal-main.js"],"sourcesContent":["// TODO:\n// move createCardMarkup to separate file\n// add rating\n// add handle to favorite button\n// add handle to give rating button\n// remove console.log and dead code\n\nimport storageApi from '../common/storage';\nimport iziToast from 'izitoast';\nimport { fetchOneExercise } from './api';\nimport svgSprite from '../images/sprite.svg';\nimport refs from './refs.js';\n\nrefs.divCategories.addEventListener('click', handleExerciseCardClick);\nrefs.favorites.addEventListener('click', handleFavoritesCardClick);\n\nexport function handleExerciseCardClick(e, exerciseId) {\n  e.preventDefault();\n\n  const isCard = e.target.closest('.exercise-item');\n\n  if (!isCard) {\n    return;\n  }\n\n  openModal(isCard.id);\n}\n\n// handleFavoritesCardClick(){\n//   // TODO: add functionality\n// };\n\nfunction openModal(exerciseId) {\n  fetchOneExercise(exerciseId).then(exercise => {\n    createCardMarkup(exercise);\n  });\n\n  // comparisonFavorites();\n  refs.backdrop.classList.remove('is-hidden');\n  document.body.classList.add('no-scroll');\n  refs.backdrop.classList.add('scroll');\n  closeModal();\n}\n\n// function comparisonFavorites() {\n//   refs.addFavorite.textContent = 'Add to favorites';\n//   refs.addFavorite.style.backgroundColor = '#fff';\n//   refs.addFavorite.style.color = '#000';\n//   const savedDate = storageApi.load(refs.FAVORITES_KEY);\n\n//   if (savedDate) {\n//     for (const el of savedDate) {\n//       if (JSON.stringify(el) === JSON.stringify(data)) {\n//         refs.addFavorite.textContent = 'Remove from favorites';\n//         refs.addFavorite.style.backgroundColor = '#ff6b01';\n//         refs.addFavorite.style.color = '#fff';\n//         break;\n//       }\n//     }\n//   }\n// }\n\nfunction closeModal() {\n  document.addEventListener('click', e => {\n    if (e.target === refs.backdrop) {\n      refs.backdrop.classList.add('is-hidden');\n      document.body.classList.remove('no-scroll');\n      refs.backdrop.classList.remove('scroll');\n    }\n  });\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') {\n      refs.backdrop.classList.add('is-hidden');\n      document.body.classList.remove('no-scroll');\n      refs.backdrop.classList.remove('scroll');\n    }\n  });\n  refs.closeModalBtn.addEventListener('click', () => {\n    refs.backdrop.classList.add('is-hidden');\n    document.body.classList.remove('no-scroll');\n    refs.backdrop.classList.remove('scroll');\n  });\n}\n\nrefs.addFavorite.addEventListener('click', e => {\n  if (e.target.textContent == 'Remove from favorites') {\n    const savedData = storageApi.load(refs.FAVORITES_KEY);\n    for (let i = 0; i < savedData.length; i++) {\n      if (JSON.stringify(savedData[i]) === JSON.stringify(data)) {\n        savedData.splice(i, 1);\n        console.log(savedData);\n        storageApi.save(refs.FAVORITES_KEY, savedData);\n        // Notify.info(`Exercise is remove from favorites`);\n        iziToast.show({\n          // title: 'Hey',\n          message: 'Removed from favorites',\n        });\n        refs.addFavorite.textContent = 'Add to favorites';\n        refs.addFavorite.style.backgroundColor = '#fff';\n        refs.addFavorite.style.color = '#000';\n      }\n    }\n  } else {\n    if (\n      !storageApi.load(refs.FAVORITES_KEY) ||\n      storageApi.load(refs.FAVORITES_KEY).length === 0\n    ) {\n      storageApi.save(refs.FAVORITES_KEY, [data]);\n      // Notify.info(`Added to favorites`, {\n      //   background: '#ff6b01',\n      // });\n      iziToast.show({\n        // title: 'Hey',\n        message: 'Added to favorites',\n      });\n      refs.addFavorite.textContent = 'Remove from favorites';\n      refs.addFavorite.style.backgroundColor = '#ff6b01';\n      refs.addFavorite.style.color = '#fff';\n      return;\n    }\n    const savedData = storageApi.load(refs.FAVORITES_KEY);\n    savedData.push(data);\n    storageApi.save(refs.FAVORITES_KEY, savedData);\n    // Notify.info(`Added to favorites`);\n    iziToast.show({\n      // title: 'Hey',\n      message: 'Added to favorites',\n    });\n    refs.addFavorite.textContent = 'Remove from favorites';\n    refs.addFavorite.style.backgroundColor = '#ff6b01';\n    refs.addFavorite.style.color = '#fff';\n  }\n\n  refs.addFavorite.removeEventListener;\n});\n\nfunction createCardMarkup(exercise) {\n  const gifUrl = exercise.gifUrl;\n  const name = exercise.name;\n  const rating = Number(exercise.rating).toFixed(1);\n  const target = exercise.target;\n  const bodyPart = exercise.bodyPart;\n  const equipment = exercise.equipment;\n  const popularity = exercise.popularity;\n  const burnedCalories = exercise.burnedCalories;\n  const description = exercise.description;\n\n  return (refs.modalContainer.innerHTML = `\n      <div class=\"modal-img\">\n        <img src=\"${gifUrl}\" alt=\"${name}\" class=\"image\" />\n      </div>\n      <div class=\"modal-rest\">\n        <h3 class=\"modal-title\">${name}</h3>\n        <div class=\"rating-element\">\n          <p class=\"rating-count\" id=\"vote\">${rating}</p>\n          <svg class=\"modal-icon-star\">\n            <use href=\"${svgSprite}#star\"></use>\n          </svg>\n        </div>\n        <div class=\"modal-info\">\n          <div class=\"modal-table\">\n            <div class=\"info-element\">\n              <p class=\"info-item\">Target</p>\n              <p class=\"count\">${target}</p>\n            </div>\n            <div class=\"info-element\">\n              <p class=\"info-item\">Body part</p>\n              <p class=\"count\">${bodyPart}</p>\n            </div>\n            <div class=\"info-element\">\n              <p class=\"info-item\">Equipment</p>\n              <p class=\"count\">${equipment}</p>\n            </div>\n            <div class=\"info-element\">\n              <p class=\"info-item\">Popular</p>\n              <p class=\"count\">${popularity}</p>\n            </div>\n            <div class=\"info-element\">\n              <p class=\"info-item\">Burned Calories</p>\n              <p class=\"count\">${burnedCalories}</p>\n            </div>\n          </div>\n          <p class=\"about-info\">${description}</p>\n        </div>\n        <div class=\"buttons\">\n          <button class=\"button add-to-favorites\" type=\"button\">\n            Add to favorites\n            <svg class=\"modal-icon-heart\">\n              <use href=\"${svgSprite}#heart\"></use>\n            </svg>\n          </button>\n          <button class=\"button give-a-rating\" type=\"button\">\n            Give a rating\n          </button>\n        </div>\n      </div>`);\n}"],"names":["refs","handleExerciseCardClick","e","exerciseId","isCard","openModal","fetchOneExercise","exercise","createCardMarkup","closeModal","savedData","storageApi","i","iziToast","gifUrl","name","rating","target","bodyPart","equipment","popularity","burnedCalories","description","svgSprite"],"mappings":"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"}